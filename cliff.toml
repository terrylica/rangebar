# git-cliff configuration for detailed CHANGELOG.md generation
# See: https://git-cliff.org/docs/configuration

[changelog]
header = """
# Changelog

All notable changes to RangeBar will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

"""
body = """
{% for group, commits in commits | group_by(attribute="group") %}
    ### {{ group | striptags | trim | upper_first }}
    {% for commit in commits %}
        - {% if commit.scope %}**{{ commit.scope }}**: {% endif %}{{ commit.message | upper_first }}\
          {% if commit.breaking %} [**breaking**]{% endif %}
    {% endfor %}
{% endfor %}
"""
trim = true

[git]
conventional_commits = true
filter_unconventional = false
split_commits = false
tag_pattern = "v[0-9]*"
tag_prefix = "v"
skip_tags = ""
ignore_tags = ""

[[git.commit_parsers]]
# Breaking changes (highest priority)
message = "^.*!:"
group = "âš ï¸ Breaking Changes"

[[git.commit_parsers]]
body = ".*BREAKING[- ]CHANGE.*"
group = "âš ï¸ Breaking Changes"

# Features (semantic grouping)
[[git.commit_parsers]]
message = "^feat\\(sanitization\\)"
group = "ğŸ§¹ Codebase Sanitization"

[[git.commit_parsers]]
message = "^feat\\(security\\)"
group = "ğŸ”’ Security Enhancements"

[[git.commit_parsers]]
message = "^feat\\(perf\\)"
group = "ğŸš€ Performance Improvements"

[[git.commit_parsers]]
message = "^feat\\(deps\\)"
group = "ğŸ“¦ Dependency Management"

[[git.commit_parsers]]
message = "^feat\\(docs\\)"
group = "ğŸ“š Documentation Improvements"

[[git.commit_parsers]]
message = "^feat"
group = "âœ¨ Features"

# Fixes (semantic grouping)
[[git.commit_parsers]]
message = "^fix\\(ci\\)"
group = "ğŸ”§ CI/CD Improvements"

[[git.commit_parsers]]
message = "^fix\\(security\\)"
group = "ğŸ”’ Security Fixes"

[[git.commit_parsers]]
message = "^fix\\(perf\\)"
group = "ğŸš€ Performance Fixes"

[[git.commit_parsers]]
message = "^fix\\(fmt\\)"
group = "ğŸ’… Code Formatting"

[[git.commit_parsers]]
message = "^fix\\(clippy\\)"
group = "ğŸ” Linting Fixes"

[[git.commit_parsers]]
message = "^fix"
group = "ğŸ› Bug Fixes"

# Other conventional commits
[[git.commit_parsers]]
message = "^refactor"
group = "â™»ï¸ Refactoring"

[[git.commit_parsers]]
message = "^chore\\(deps\\)"
group = "ğŸ“¦ Dependency Updates"

[[git.commit_parsers]]
message = "^chore"
group = "ğŸ§° Maintenance"

[[git.commit_parsers]]
message = "^docs"
group = "ğŸ“š Documentation"

[[git.commit_parsers]]
message = "^test"
group = "ğŸ§ª Testing"

[[git.commit_parsers]]
message = "^build"
group = "ğŸ—ï¸ Build System"

[[git.commit_parsers]]
message = "^ci"
group = "ğŸ”§ Continuous Integration"

[[git.commit_parsers]]
message = "^style"
group = "ğŸ’… Code Style"

# Catch-all
[[git.commit_parsers]]
message = ".*"
group = "ğŸ“ Other Changes"

[[git.commit_preprocessors]]
# Remove gitmoji from messages to avoid duplication
pattern = ':\w+:'
replace = ""

[[git.commit_preprocessors]]
# Clean up extra whitespace
pattern = '\s+'
replace = " "

[bump]
# Automatic version bumping rules (optional, used with --bump flag)
features_always_bump_minor = true
breaking_always_bump_major = true
